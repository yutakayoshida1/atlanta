<template>
  <div class="view">
    <div class="navbar-scroll-wrapper">
      <div id="" v-show="scrollToLeft" class="slide-left-wrapper">
        <svg
          width="11"
          height="18"
          viewBox="0 0 11 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          @click="scrollNavbarHorizontally('left')"
        >
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0607 15.4393C10.6464 16.0251 10.6464 16.9749 10.0607 17.5607C9.47487 18.1464 8.52513 18.1464 7.93934 17.5607L0.43934 10.0607C-0.146447 9.47487 -0.146447 8.52513 0.43934 7.93934L7.93934 0.43934C8.52513 -0.146447 9.47487 -0.146447 10.0607 0.43934C10.6464 1.02513 10.6464 1.97487 10.0607 2.56066L3.62132 9L10.0607 15.4393Z" fill="#293F94"/>
        </svg>
      </div>

      <div v-show="scrollToRight" class="slide-right-wrapper">
        <svg
          width="11"
          height="18"
          viewBox="0 0 11 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          @click="scrollNavbarHorizontally('right')"
        >
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0607 15.4393C10.6464 16.0251 10.6464 16.9749 10.0607 17.5607C9.47487 18.1464 8.52513 18.1464 7.93934 17.5607L0.43934 10.0607C-0.146447 9.47487 -0.146447 8.52513 0.43934 7.93934L7.93934 0.43934C8.52513 -0.146447 9.47487 -0.146447 10.0607 0.43934C10.6464 1.02513 10.6464 1.97487 10.0607 2.56066L3.62132 9L10.0607 15.4393Z" fill="#293F94"/>
        </svg>
      </div>
      <div id="navbar-meal" class="meal-nav">
        <div
          v-if="this.$store.state.wizard.selectPreparedMenus === 0"
          class="meal-item-wrapper"
          id="meal-items-wrapper-content"
        >
          <div
            v-for="n in this.$store.state.wizard.amountOfMeals"
            :id="'n-i-' + n"
            :key="n"
            :class="{ 'nav-item n-i-w ': true, 'nav-item-available': (n === 1) }"
            @click="selectMealFromNavbar(n)"
          >
            <svg
              v-if="checkIfMealIsDone(n)"
              width="21"
              height="21"
              viewBox="0 0 21 21"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="desktop-only-not-mobile"
            >
              <circle cx="10.125" cy="10.125" r="10.125" fill="#34BC89" />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M6.92385 14.2265L4.37389 11.6766C3.87537 11.1781 3.87537 10.3724 4.37389 9.87391C4.87241 9.37542 5.67819 9.37542 6.17671 9.87391L7.62764 11.3248L13.6644 5.56806C14.0545 4.98161 14.845 4.82352 15.4328 5.21491C16.018 5.60631 16.1761 6.39675 15.786 6.98321L8.88604 14.0327C8.6744 14.3501 8.33015 14.5567 7.95148 14.5936C7.90813 14.5975 7.86733 14.6 7.82526 14.6C7.48867 14.6 7.16355 14.4674 6.92385 14.2265Z"
                fill="white"
              />
            </svg>
            <svg
              width="24"
              height="26"
              viewBox="0 0 24 26"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              v-if="!checkIfMealIsDone(n) && checkIfMealWasDuplicated(n)"
            >
              <path
                d="M5.76808 23.0547H18.1476C21.1522 23.0547 23.0842 19.8658 21.693 17.2026L15.4164 5.18723C13.9106 2.30481 9.77731 2.32842 8.30463 5.22786L2.20174 17.2433C0.850163 19.9043 2.7835 23.0547 5.76808 23.0547Z"
                fill="#FFCE20"
              />
              <path d="M11.625 16.3789C11.3777 16.3789 11.1648 16.3012 10.9863 16.1456C10.8214 15.99 10.7184 15.7632 10.6772 15.4651L9.7706 9.43311C9.75687 9.3683 9.75 9.27756 9.75 9.1609C9.75 8.68128 9.92857 8.29888 10.2857 8.01371C10.6429 7.72853 11.0893 7.58594 11.625 7.58594C12.1607 7.58594 12.6071 7.72853 12.9643 8.01371C13.3214 8.29888 13.5 8.68776 13.5 9.18034C13.5 9.29701 13.4931 9.38774 13.4794 9.45256L12.5522 15.4651C12.5247 15.7632 12.4217 15.99 12.2431 16.1456C12.0783 16.3012 11.8723 16.3789 11.625 16.3789ZM11.625 20.7344C11.1168 20.7344 10.6978 20.5788 10.3681 20.2677C10.0385 19.9437 9.87363 19.5418 9.87363 19.0622C9.87363 18.5826 10.0385 18.1872 10.3681 17.8761C10.6978 17.552 11.1168 17.39 11.625 17.39C12.1332 17.39 12.5522 17.552 12.8819 17.8761C13.2115 18.1872 13.3764 18.5826 13.3764 19.0622C13.3764 19.5418 13.2115 19.9437 12.8819 20.2677C12.5522 20.5788 12.1332 20.7344 11.625 20.7344Z" fill="#3C3C3C"/>
            </svg>

            <p>Meal {{ n }}</p>
          </div>
          <button class="add-btn" @click="addMealPopup = true">+ ADD</button>
        </div>
      </div>
    </div>

    <div
      @click="toggleSelectEntryMeal()"
      :class="{
        'meal-view-card-warning':
          !selectedMealSet &&
          checkIfMealWasDuplicated(Number(actualMealId) - 1),
          'w-meals-view-card m-top-24 select-meals-dishes select-entry-meal': true
      }"
    >
      <svg
        v-if="selectedMealSet"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 1.875C6.40812 1.875 1.875 6.40812 1.875 12C1.875 17.5919 6.40812 22.125 12 22.125C17.5919 22.125 22.125 17.5919 22.125 12C22.125 6.40812 17.5919 1.875 12 1.875Z"
          fill="#34BC89"
        />
        <mask
          id="mask0099989"
          mask-type="alpha"
          maskUnits="userSpaceOnUse"
          x="1"
          y="1"
          width="22"
          height="22"
        >
          <path
            d="M12 1.875C6.40812 1.875 1.875 6.40812 1.875 12C1.875 17.5919 6.40812 22.125 12 22.125C17.5919 22.125 22.125 17.5919 22.125 12C22.125 6.40812 17.5919 1.875 12 1.875Z"
            fill="white"
          />
        </mask>
        <g mask="url(#mask0099989)">
          <rect y="-0.375" width="24" height="24.75" fill="#34BC89" />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.92385 16.4266L6.37389 13.8767C5.87537 13.3782 5.87537 12.5725 6.37389 12.074C6.87241 11.5755 7.67819 11.5755 8.17671 12.074L9.62764 13.5249L15.6644 7.76817C16.0545 7.18171 16.845 7.02362 17.4328 7.41502C18.018 7.80642 18.1761 8.59686 17.786 9.18332L10.886 16.2328C10.6744 16.5502 10.3302 16.7568 9.95148 16.7937C9.90813 16.7976 9.86733 16.8001 9.82526 16.8001C9.48867 16.8001 9.16355 16.6675 8.92385 16.4266Z"
            fill="white"
          />
          <mask
            id="mask231421"
            mask-type="alpha"
            maskUnits="userSpaceOnUse"
            x="6"
            y="7"
            width="12"
            height="10"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M8.92385 16.4266L6.37389 13.8767C5.87537 13.3782 5.87537 12.5725 6.37389 12.074C6.87241 11.5755 7.67819 11.5755 8.17671 12.074L9.62764 13.5249L15.6644 7.76817C16.0545 7.18171 16.845 7.02362 17.4328 7.41502C18.018 7.80642 18.1761 8.59686 17.786 9.18332L10.886 16.2328C10.6744 16.5502 10.3302 16.7568 9.95148 16.7937C9.90813 16.7976 9.86733 16.8001 9.82526 16.8001C9.48867 16.8001 9.16355 16.6675 8.92385 16.4266Z"
              fill="white"
            />
          </mask>
          <g mask="url(#mask231421)">
            <rect x="2.25" y="2.25" width="19.5" height="19.5" fill="white" />
          </g>
        </g>
      </svg>

      <svg
        width="24"
        height="26"
        viewBox="0 0 24 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        v-if="
          !selectedMealSet && checkIfMealWasDuplicated(Number(actualMealId) - 1)
        "
      >
        <path
          d="M5.76808 23.0547H18.1476C21.1522 23.0547 23.0842 19.8658 21.693 17.2026L15.4164 5.18723C13.9106 2.30481 9.77731 2.32842 8.30463 5.22786L2.20174 17.2433C0.850163 19.9043 2.7835 23.0547 5.76808 23.0547Z"
          fill="#FFCE20"
        />
        <path
          d="M11.625 16.3789C11.3777 16.3789 11.1648 16.3012 10.9863 16.1456C10.8214 15.99 10.7184 15.7632 10.6772 15.4651L9.7706 9.43311C9.75687 9.3683 9.75 9.27756 9.75 9.1609C9.75 8.68128 9.92857 8.29888 10.2857 8.01371C10.6429 7.72853 11.0893 7.58594 11.625 7.58594C12.1607 7.58594 12.6071 7.72853 12.9643 8.01371C13.3214 8.29888 13.5 8.68776 13.5 9.18034C13.5 9.29701 13.4931 9.38774 13.4794 9.45256L12.5522 15.4651C12.5247 15.7632 12.4217 15.99 12.2431 16.1456C12.0783 16.3012 11.8723 16.3789 11.625 16.3789ZM11.625 20.7344C11.1168 20.7344 10.6978 20.5788 10.3681 20.2677C10.0385 19.9437 9.87363 19.5418 9.87363 19.0622C9.87363 18.5826 10.0385 18.1872 10.3681 17.8761C10.6978 17.552 11.1168 17.39 11.625 17.39C12.1332 17.39 12.5522 17.552 12.8819 17.8761C13.2115 18.1872 13.3764 18.5826 13.3764 19.0622C13.3764 19.5418 13.2115 19.9437 12.8819 20.2677C12.5522 20.5788 12.1332 20.7344 11.625 20.7344Z"
          fill="#3C3C3C"
        />
      </svg>

      <p>Step 1. Select Entry Meal</p>
      <svg
        id="arrow-dp-box-01"
        width="14"
        height="24"
        viewBox="0 0 14 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="arrow-dp-box"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M0.585787 20.5858C-0.195262 21.3668 -0.195262 22.6332 0.585787 23.4142C1.36684 24.1953 2.63316 24.1953 3.41421 23.4142L13.4142 13.4142C14.1953 12.6332 14.1953 11.3668 13.4142 10.5858L3.41421 0.585786C2.63316 -0.195262 1.36684 -0.195262 0.585787 0.585786C-0.195262 1.36684 -0.195262 2.63317 0.585787 3.41421L9.17157 12L0.585787 20.5858Z"
          fill="#293F94"
        />
      </svg>
    </div>
    <div v-show="selectEntryMeal" class="meal-showdown">
      <div v-show="!selectedMealSet" class="meal-info-sort">
        <p class="left-info">Entry meal</p>
        <div class="right-sort">
          <p class="light-text t-i">sort by</p>
          <span class="sort-by">
            <span @click="toggleSort('meals')">
              <p class="t-i">{{ sortBy }}</p>
              <svg
                width="12"
                height="8"
                viewBox="0 0 12 8"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10.2929 1.11125C10.6834 0.720728 11.3166 0.720728 11.7071 1.11125C12.0976 1.50178 12.0976 2.13494 11.7071 2.52547L6.70711 7.52547C6.31658 7.91599 5.68342 7.91599 5.29289 7.52547L0.292893 2.52547C-0.0976311 2.13494 -0.0976311 1.50178 0.292893 1.11125C0.683418 0.720728 1.31658 0.720728 1.70711 1.11125L6 5.40415L10.2929 1.11125Z"
                  fill="#1A1A1A"
                />
              </svg>
            </span>
            <div :class="{ 'sort-dropdown': true, 'sort-dropdown-opened': sortMealsMenuOpened }">
              <div v-for="option in sortByOptions" :key="option" class="sort-dropdown-value" @click="selectSortBy('meals', option)">
                {{ option }}
                <svg v-if="option === sortBy" width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.89847 12.3019L0.498517 8.90218C-0.166172 8.23753 -0.166172 7.1632 0.498517 6.49855C1.16321 5.8339 2.23759 5.8339 2.90228 6.49855L4.83685 8.43301L12.8859 0.757419C13.4061 -0.024525 14.46 -0.23531 15.2437 0.286553C16.024 0.808415 16.2348 1.86234 15.7146 2.64428L6.51473 12.0436C6.23253 12.4668 5.77354 12.7422 5.26864 12.7915C5.21085 12.7966 5.15645 12.8 5.10035 12.8C4.65155 12.8 4.21806 12.6232 3.89847 12.3019Z" fill="#3C3C3C"/>
                </svg>
              </div>
            </div>
          </span>
          <div class="block-30px"></div>
          <span class="filter">
            <p class="t-i" @click="openFilters('meals')">Filters</p>
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M5.18812 8.29981L0.676239 1.98229C0.233121 1.36184 0.676577 0.5 1.43895 0.5H14.5611C15.3234 0.5 15.7669 1.36184 15.3238 1.98229L10.8119 8.29981V12.6865C10.8119 13.0416 10.6113 13.3662 10.2938 13.525L6.54458 15.3998C5.92138 15.7115 5.18812 15.2582 5.18812 14.5614V8.29981Z"
                fill="#1A1A1A"
              />
            </svg>
          </span>
        </div>
      </div>

      <div v-for="meal in mealProducts" :key="meal.id">
        <div v-if="!selectedMealSet" class="w-meals-view-card meal-item">
          <div class="meal-item-icon-wrapper">
            <svg
              width="22"
              height="24"
              viewBox="0 0 22 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M16.9421 21.208C15.1731 21.208 13.7338 19.7687 13.7338 17.9993C13.7338 17.6589 13.7878 17.3315 13.8865 17.023C14.4084 17.2447 14.9634 17.4209 15.5516 17.5464C15.6164 17.5605 15.6808 17.5669 15.7441 17.5669C16.1673 17.5669 16.5476 17.2722 16.6396 16.842C16.7458 16.347 16.4303 15.8597 15.9352 15.7536C15.5955 15.6809 15.2726 15.5886 14.9641 15.4783C15.5098 15.0492 16.1956 14.7911 16.9421 14.7911C18.711 14.7911 20.1507 16.2304 20.1507 17.9993C20.1507 19.7687 18.711 21.208 16.9421 21.208ZM18.749 10.2057C18.1366 9.87274 17.4933 9.59188 16.8604 9.31586C14.6896 8.36862 12.626 7.46868 11.5942 4.64966C15.2688 5.0363 17.9522 7.1502 18.749 10.2057ZM8.0015 16.3091C8.45296 17.0373 8.59377 17.8982 8.39821 18.7326C8.20228 19.5669 7.69345 20.275 6.96486 20.7265C6.45641 21.042 5.87309 21.2085 5.27859 21.2085C4.15776 21.2085 3.13713 20.6412 2.54748 19.6902C2.09602 18.9616 1.95522 18.1012 2.15077 17.2668C2.3467 16.4324 2.85553 15.7243 3.58412 15.2725C3.87876 15.09 4.19873 14.9588 4.531 14.8795C4.5973 15.4107 4.7232 15.9687 4.92025 16.5594C5.04802 16.9438 5.40561 17.1871 5.78965 17.1871C5.88575 17.1871 5.98334 17.1718 6.07945 17.1398C6.55959 16.9796 6.81959 16.4607 6.65942 15.9802C6.54543 15.6375 6.462 15.3108 6.40463 14.9961C7.05761 15.2404 7.62007 15.6938 8.0015 16.3091ZM16.9412 12.9578C15.4889 12.9578 14.1788 13.5758 13.2577 14.5617C12.5935 14.0533 12.0474 13.4096 11.6273 12.6307C10.8167 11.1285 10.5061 9.13007 10.6823 6.94391C12.1204 9.24629 14.288 10.1943 16.1262 10.9963C17.3327 11.5226 18.4722 12.0199 19.2611 12.8088C19.4366 12.9842 19.6709 13.0774 19.9093 13.0774H19.9182C20.4222 13.0744 20.8297 12.665 20.8297 12.1603C20.8297 12.1312 20.8282 12.1026 20.8256 12.0739C20.7824 7.05492 16.996 3.32367 11.6254 2.8141C11.7241 2.49301 11.8157 2.16224 11.8969 1.81843C11.8996 1.80874 11.8988 1.79943 11.901 1.79012C11.9078 1.75734 11.9107 1.72493 11.9137 1.69252C11.9167 1.66421 11.9197 1.6359 11.9197 1.60797C11.9197 1.57705 11.9167 1.54688 11.9133 1.51633C11.9107 1.48691 11.9081 1.45785 11.9025 1.42954C11.8966 1.40049 11.888 1.37293 11.8794 1.34499C11.8709 1.31668 11.8631 1.28837 11.8519 1.26081C11.8407 1.23361 11.8269 1.20828 11.8131 1.18221C11.7994 1.15651 11.7867 1.13081 11.7707 1.10659C11.7543 1.08164 11.7353 1.05854 11.7167 1.03545C11.6984 1.01273 11.6809 0.990004 11.6608 0.969144C11.6403 0.948285 11.6176 0.92966 11.5949 0.910291C11.5718 0.890548 11.5487 0.871179 11.5237 0.853672C11.5002 0.837655 11.4749 0.824245 11.45 0.81009C11.4216 0.794446 11.3933 0.778801 11.3632 0.765764C11.3539 0.762039 11.3464 0.756451 11.3371 0.752726C11.317 0.744904 11.2961 0.741924 11.2756 0.735592C11.2555 0.72926 11.2373 0.72032 11.2164 0.715105C11.2067 0.71287 11.1974 0.713242 11.1881 0.71138C11.1553 0.704675 11.1233 0.701695 11.0905 0.698343C11.0622 0.695735 11.0339 0.692383 11.0056 0.692383C10.975 0.692383 10.9452 0.695735 10.9147 0.698715C10.8853 0.701695 10.8558 0.704303 10.8272 0.70989C10.7985 0.715477 10.7713 0.724045 10.7437 0.732612C10.715 0.741179 10.6863 0.749374 10.6588 0.760549C10.632 0.771724 10.6066 0.785506 10.5806 0.798915C10.5549 0.812698 10.5288 0.825735 10.5042 0.841752C10.4792 0.858142 10.4565 0.876766 10.4334 0.895391C10.4107 0.913643 10.388 0.93115 10.3671 0.951637C10.3459 0.972124 10.3276 0.994846 10.3083 1.0172C10.2885 1.04066 10.2692 1.06338 10.2517 1.08871C10.2356 1.11218 10.2222 1.13714 10.2081 1.16247C10.1924 1.19078 10.1768 1.21909 10.1637 1.24926C10.16 1.25857 10.1541 1.26602 10.1507 1.27533C9.85458 2.03745 9.61097 2.79994 9.41131 3.55685C8.74939 5.15186 7.8759 6.46377 7.02177 7.74291C5.89946 9.42434 4.81848 11.0462 4.54209 13.0111C3.86304 13.1109 3.20783 13.3485 2.61743 13.7143C1.47276 14.4239 0.673021 15.5369 0.365715 16.8477C0.0580365 18.1589 0.279297 19.5114 0.988894 20.6561C1.91491 22.1502 3.51849 23.0419 5.27814 23.0419C6.21421 23.0419 7.13166 22.78 7.93065 22.2846C9.07532 21.5754 9.87506 20.4624 10.1827 19.1512C10.4904 17.84 10.2688 16.4875 9.55919 15.3432C8.83395 14.1729 7.69226 13.3746 6.38667 13.0826C6.64258 11.6138 7.50378 10.3235 8.54676 8.76093C8.62945 8.63652 8.71326 8.51136 8.79744 8.38471C8.83432 10.3038 9.23624 12.0601 10.0136 13.5013C10.5821 14.5547 11.3423 15.43 12.2683 16.1094C12.031 16.6935 11.8996 17.3312 11.8996 17.9995C11.8996 20.7798 14.161 23.0415 16.9412 23.0415C19.7215 23.0415 21.9833 20.7798 21.9833 17.9995C21.9833 15.2196 19.7215 12.9578 16.9412 12.9578Z"
                fill="#293F94"
              />
            </svg>
          </div>
          <div class="meal-info-wrapper">
            <p class="meal-item-name">{{ meal.name }}</p>
            <div class="meal-values">
              <div class="value-pair">
                <svg
                  width="12"
                  height="14"
                  viewBox="0 0 12 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.38761 13.0226C9.00438 13.3174 8.50324 13.5975 7.92841 13.8038C7.81049 13.848 7.69258 13.7301 7.72206 13.6122C7.81049 13.2437 7.86945 12.8605 7.86945 12.4625C7.86945 10.4137 6.42499 8.6745 5.92385 8.11441C5.82068 8.01123 5.65854 8.01123 5.57011 8.11441C5.06897 8.65976 3.62451 10.399 3.62451 12.4625C3.62451 12.9194 3.69821 13.3764 3.81612 13.7891C3.8456 13.907 3.74243 14.0249 3.62451 13.9954C2.63697 13.7301 1.84105 13.3027 1.54626 13.0668C-0.856261 11.0328 -0.0161164 7.83436 1.10408 6.15407C2.34218 4.25269 3.81612 2.63136 3.74242 0.361494C3.72769 0.0961853 4.02247 -0.0806873 4.2583 0.0372278C6.1302 0.980548 7.41253 3.02932 7.75154 4.66539C8.25267 4.19373 8.45903 3.45676 8.47377 2.80823C8.47377 2.4987 8.87173 2.33657 9.09282 2.5724C10.7731 4.38534 13.3672 9.91261 9.38761 13.0226Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.calories }}g Calories</p>
              </div>
              <div class="value-spacer"></div>
              <div class="value-pair">
                <svg
                  width="11"
                  height="14"
                  viewBox="0 0 11 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M0 8.66807C0 5.83383 3.33024 2.16702 5.34964 0C5.57131 0.264132 5.81789 0.550545 6.08002 0.855016C7.96848 3.04852 10.6639 6.17928 10.6639 8.66807C10.6639 10.3332 9.3294 14 5.33193 14C1.33446 14 0 10.3332 0 8.66807ZM1.59364 8.60186C1.542 8.49639 1.49094 8.39208 1.43989 8.2892C0.214175 9.74708 2.65839 13.9336 6.11922 13.2047C3.26094 12.0077 2.36399 10.1755 1.59364 8.60186Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.fat }}g Fat</p>
              </div>
              <div class="value-spacer"></div>
              <div class="value-pair">
                <svg
                  width="12"
                  height="16"
                  viewBox="0 0 12 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.carbs }}g Carbs</p>
              </div>
              <div class="value-spacer"></div>
              <div class="value-pair">
                <svg
                  width="12"
                  height="16"
                  viewBox="0 0 12 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.protein }}g Protein</p>
              </div>
            </div>
          </div>
          <div class="buttons-wrapper">
            <button
              class="meal-info b-t ms-outlined-button"
              @click="openMealInfo(meal.id)"
            >
              INFO
            </button>
            <button
              v-if="!selectedMealSet"
              class="meal-info select-btn"
              @click="selectMeal(selectedMeal, meal)"
            >
              SELECT
            </button>
            <button
              v-if="selectedMealSet"
              class="meal-info b-t ms-outlined-button"
              @click="unselectMeal(selectedMeal)"
            >
              UNSELECT
            </button>
          </div>
        </div>
        <!-- end of product div -->
        <div
          v-if="selectedMealSet && meal.id == actualMealId"
          class="w-meals-view-card meal-item"
        >
          <div class="meal-item-icon-wrapper">
            <svg
              width="22"
              height="24"
              viewBox="0 0 22 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M16.9421 21.208C15.1731 21.208 13.7338 19.7687 13.7338 17.9993C13.7338 17.6589 13.7878 17.3315 13.8865 17.023C14.4084 17.2447 14.9634 17.4209 15.5516 17.5464C15.6164 17.5605 15.6808 17.5669 15.7441 17.5669C16.1673 17.5669 16.5476 17.2722 16.6396 16.842C16.7458 16.347 16.4303 15.8597 15.9352 15.7536C15.5955 15.6809 15.2726 15.5886 14.9641 15.4783C15.5098 15.0492 16.1956 14.7911 16.9421 14.7911C18.711 14.7911 20.1507 16.2304 20.1507 17.9993C20.1507 19.7687 18.711 21.208 16.9421 21.208ZM18.749 10.2057C18.1366 9.87274 17.4933 9.59188 16.8604 9.31586C14.6896 8.36862 12.626 7.46868 11.5942 4.64966C15.2688 5.0363 17.9522 7.1502 18.749 10.2057ZM8.0015 16.3091C8.45296 17.0373 8.59377 17.8982 8.39821 18.7326C8.20228 19.5669 7.69345 20.275 6.96486 20.7265C6.45641 21.042 5.87309 21.2085 5.27859 21.2085C4.15776 21.2085 3.13713 20.6412 2.54748 19.6902C2.09602 18.9616 1.95522 18.1012 2.15077 17.2668C2.3467 16.4324 2.85553 15.7243 3.58412 15.2725C3.87876 15.09 4.19873 14.9588 4.531 14.8795C4.5973 15.4107 4.7232 15.9687 4.92025 16.5594C5.04802 16.9438 5.40561 17.1871 5.78965 17.1871C5.88575 17.1871 5.98334 17.1718 6.07945 17.1398C6.55959 16.9796 6.81959 16.4607 6.65942 15.9802C6.54543 15.6375 6.462 15.3108 6.40463 14.9961C7.05761 15.2404 7.62007 15.6938 8.0015 16.3091ZM16.9412 12.9578C15.4889 12.9578 14.1788 13.5758 13.2577 14.5617C12.5935 14.0533 12.0474 13.4096 11.6273 12.6307C10.8167 11.1285 10.5061 9.13007 10.6823 6.94391C12.1204 9.24629 14.288 10.1943 16.1262 10.9963C17.3327 11.5226 18.4722 12.0199 19.2611 12.8088C19.4366 12.9842 19.6709 13.0774 19.9093 13.0774H19.9182C20.4222 13.0744 20.8297 12.665 20.8297 12.1603C20.8297 12.1312 20.8282 12.1026 20.8256 12.0739C20.7824 7.05492 16.996 3.32367 11.6254 2.8141C11.7241 2.49301 11.8157 2.16224 11.8969 1.81843C11.8996 1.80874 11.8988 1.79943 11.901 1.79012C11.9078 1.75734 11.9107 1.72493 11.9137 1.69252C11.9167 1.66421 11.9197 1.6359 11.9197 1.60797C11.9197 1.57705 11.9167 1.54688 11.9133 1.51633C11.9107 1.48691 11.9081 1.45785 11.9025 1.42954C11.8966 1.40049 11.888 1.37293 11.8794 1.34499C11.8709 1.31668 11.8631 1.28837 11.8519 1.26081C11.8407 1.23361 11.8269 1.20828 11.8131 1.18221C11.7994 1.15651 11.7867 1.13081 11.7707 1.10659C11.7543 1.08164 11.7353 1.05854 11.7167 1.03545C11.6984 1.01273 11.6809 0.990004 11.6608 0.969144C11.6403 0.948285 11.6176 0.92966 11.5949 0.910291C11.5718 0.890548 11.5487 0.871179 11.5237 0.853672C11.5002 0.837655 11.4749 0.824245 11.45 0.81009C11.4216 0.794446 11.3933 0.778801 11.3632 0.765764C11.3539 0.762039 11.3464 0.756451 11.3371 0.752726C11.317 0.744904 11.2961 0.741924 11.2756 0.735592C11.2555 0.72926 11.2373 0.72032 11.2164 0.715105C11.2067 0.71287 11.1974 0.713242 11.1881 0.71138C11.1553 0.704675 11.1233 0.701695 11.0905 0.698343C11.0622 0.695735 11.0339 0.692383 11.0056 0.692383C10.975 0.692383 10.9452 0.695735 10.9147 0.698715C10.8853 0.701695 10.8558 0.704303 10.8272 0.70989C10.7985 0.715477 10.7713 0.724045 10.7437 0.732612C10.715 0.741179 10.6863 0.749374 10.6588 0.760549C10.632 0.771724 10.6066 0.785506 10.5806 0.798915C10.5549 0.812698 10.5288 0.825735 10.5042 0.841752C10.4792 0.858142 10.4565 0.876766 10.4334 0.895391C10.4107 0.913643 10.388 0.93115 10.3671 0.951637C10.3459 0.972124 10.3276 0.994846 10.3083 1.0172C10.2885 1.04066 10.2692 1.06338 10.2517 1.08871C10.2356 1.11218 10.2222 1.13714 10.2081 1.16247C10.1924 1.19078 10.1768 1.21909 10.1637 1.24926C10.16 1.25857 10.1541 1.26602 10.1507 1.27533C9.85458 2.03745 9.61097 2.79994 9.41131 3.55685C8.74939 5.15186 7.8759 6.46377 7.02177 7.74291C5.89946 9.42434 4.81848 11.0462 4.54209 13.0111C3.86304 13.1109 3.20783 13.3485 2.61743 13.7143C1.47276 14.4239 0.673021 15.5369 0.365715 16.8477C0.0580365 18.1589 0.279297 19.5114 0.988894 20.6561C1.91491 22.1502 3.51849 23.0419 5.27814 23.0419C6.21421 23.0419 7.13166 22.78 7.93065 22.2846C9.07532 21.5754 9.87506 20.4624 10.1827 19.1512C10.4904 17.84 10.2688 16.4875 9.55919 15.3432C8.83395 14.1729 7.69226 13.3746 6.38667 13.0826C6.64258 11.6138 7.50378 10.3235 8.54676 8.76093C8.62945 8.63652 8.71326 8.51136 8.79744 8.38471C8.83432 10.3038 9.23624 12.0601 10.0136 13.5013C10.5821 14.5547 11.3423 15.43 12.2683 16.1094C12.031 16.6935 11.8996 17.3312 11.8996 17.9995C11.8996 20.7798 14.161 23.0415 16.9412 23.0415C19.7215 23.0415 21.9833 20.7798 21.9833 17.9995C21.9833 15.2196 19.7215 12.9578 16.9412 12.9578Z"
                fill="#293F94"
              />
            </svg>
          </div>
          <div class="meal-info-wrapper">
            <p class="meal-item-name">{{ meal.name }}</p>
            <div class="meal-values">
              <div class="value-pair">
                <svg
                  width="12"
                  height="14"
                  viewBox="0 0 12 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M9.38761 13.0226C9.00438 13.3174 8.50324 13.5975 7.92841 13.8038C7.81049 13.848 7.69258 13.7301 7.72206 13.6122C7.81049 13.2437 7.86945 12.8605 7.86945 12.4625C7.86945 10.4137 6.42499 8.6745 5.92385 8.11441C5.82068 8.01123 5.65854 8.01123 5.57011 8.11441C5.06897 8.65976 3.62451 10.399 3.62451 12.4625C3.62451 12.9194 3.69821 13.3764 3.81612 13.7891C3.8456 13.907 3.74243 14.0249 3.62451 13.9954C2.63697 13.7301 1.84105 13.3027 1.54626 13.0668C-0.856261 11.0328 -0.0161164 7.83436 1.10408 6.15407C2.34218 4.25269 3.81612 2.63136 3.74242 0.361494C3.72769 0.0961853 4.02247 -0.0806873 4.2583 0.0372278C6.1302 0.980548 7.41253 3.02932 7.75154 4.66539C8.25267 4.19373 8.45903 3.45676 8.47377 2.80823C8.47377 2.4987 8.87173 2.33657 9.09282 2.5724C10.7731 4.38534 13.3672 9.91261 9.38761 13.0226Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.calories }}g Calories</p>
              </div>
              <div class="value-spacer"></div>
              <div class="value-pair">
                <svg
                  width="11"
                  height="14"
                  viewBox="0 0 11 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M0 8.66807C0 5.83383 3.33024 2.16702 5.34964 0C5.57131 0.264132 5.81789 0.550545 6.08002 0.855016C7.96848 3.04852 10.6639 6.17928 10.6639 8.66807C10.6639 10.3332 9.3294 14 5.33193 14C1.33446 14 0 10.3332 0 8.66807ZM1.59364 8.60186C1.542 8.49639 1.49094 8.39208 1.43989 8.2892C0.214175 9.74708 2.65839 13.9336 6.11922 13.2047C3.26094 12.0077 2.36399 10.1755 1.59364 8.60186Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.fat }}g Fat</p>
              </div>
              <div class="value-spacer"></div>
              <div class="value-pair">
                <svg
                  width="12"
                  height="16"
                  viewBox="0 0 12 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.carbs }}g Carbs</p>
              </div>
              <div class="value-spacer"></div>
              <div class="value-pair">
                <svg
                  width="12"
                  height="16"
                  viewBox="0 0 12 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                    fill="#A4B6C0"
                  />
                </svg>
                <p>{{ meal.protein }}g Protein</p>
              </div>
            </div>
          </div>
          <div class="buttons-wrapper">
            <button
              class="meal-info b-t ms-outlined-button"
              @click="openMealInfo(meal.id)"
            >
              INFO
            </button>
            <button
              v-if="!selectedMealSet"
              class="meal-info select-btn"
              @click="selectMeal(selectedMeal, meal)"
            >
              SELECT
            </button>
            <button
              v-if="selectedMealSet"
              class="meal-info b-t ms-outlined-button"
              @click="unselectMeal(selectedMeal)"
            >
              UNSELECT
            </button>
          </div>
        </div>
      </div>
    </div>
    <div
      id="side-dish-card"
      class="w-meals-view-card w-meals-view-card-disabled m-top-24 select-meals-dishes select-entry-meal"
      @click="toggleSelectSideDishes()"
    >
      <svg
        v-if="this.$store.state.wizard.sideDishFreeSlots === 0"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 1.875C6.40812 1.875 1.875 6.40812 1.875 12C1.875 17.5919 6.40812 22.125 12 22.125C17.5919 22.125 22.125 17.5919 22.125 12C22.125 6.40812 17.5919 1.875 12 1.875Z"
          fill="#34BC89"
        />
        <mask
          id="mask0099989"
          mask-type="alpha"
          maskUnits="userSpaceOnUse"
          x="1"
          y="1"
          width="22"
          height="22"
        >
          <path
            d="M12 1.875C6.40812 1.875 1.875 6.40812 1.875 12C1.875 17.5919 6.40812 22.125 12 22.125C17.5919 22.125 22.125 17.5919 22.125 12C22.125 6.40812 17.5919 1.875 12 1.875Z"
            fill="white"
          />
        </mask>
        <g mask="url(#mask0099989)">
          <rect y="-0.375" width="24" height="24.75" fill="#34BC89" />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.92385 16.4266L6.37389 13.8767C5.87537 13.3782 5.87537 12.5725 6.37389 12.074C6.87241 11.5755 7.67819 11.5755 8.17671 12.074L9.62764 13.5249L15.6644 7.76817C16.0545 7.18171 16.845 7.02362 17.4328 7.41502C18.018 7.80642 18.1761 8.59686 17.786 9.18332L10.886 16.2328C10.6744 16.5502 10.3302 16.7568 9.95148 16.7937C9.90813 16.7976 9.86733 16.8001 9.82526 16.8001C9.48867 16.8001 9.16355 16.6675 8.92385 16.4266Z"
            fill="white"
          />
          <mask
            id="mask231421"
            mask-type="alpha"
            maskUnits="userSpaceOnUse"
            x="6"
            y="7"
            width="12"
            height="10"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M8.92385 16.4266L6.37389 13.8767C5.87537 13.3782 5.87537 12.5725 6.37389 12.074C6.87241 11.5755 7.67819 11.5755 8.17671 12.074L9.62764 13.5249L15.6644 7.76817C16.0545 7.18171 16.845 7.02362 17.4328 7.41502C18.018 7.80642 18.1761 8.59686 17.786 9.18332L10.886 16.2328C10.6744 16.5502 10.3302 16.7568 9.95148 16.7937C9.90813 16.7976 9.86733 16.8001 9.82526 16.8001C9.48867 16.8001 9.16355 16.6675 8.92385 16.4266Z"
              fill="white"
            />
          </mask>
          <g mask="url(#mask231421)">
            <rect x="2.25" y="2.25" width="19.5" height="19.5" fill="white" />
          </g>
        </g>
      </svg>
      <svg
        width="24"
        height="26"
        viewBox="0 0 24 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        v-if="
          this.$store.state.wizard.sideDishFreeSlots !== 0 &&
          checkIfMealWasDuplicated(Number(actualMealId) - 1)
        "
      >
        <path
          d="M5.76808 23.0547H18.1476C21.1522 23.0547 23.0842 19.8658 21.693 17.2026L15.4164 5.18723C13.9106 2.30481 9.77731 2.32842 8.30463 5.22786L2.20174 17.2433C0.850163 19.9043 2.7835 23.0547 5.76808 23.0547Z"
          fill="#FFCE20"
        />
        <path
          d="M11.625 16.3789C11.3777 16.3789 11.1648 16.3012 10.9863 16.1456C10.8214 15.99 10.7184 15.7632 10.6772 15.4651L9.7706 9.43311C9.75687 9.3683 9.75 9.27756 9.75 9.1609C9.75 8.68128 9.92857 8.29888 10.2857 8.01371C10.6429 7.72853 11.0893 7.58594 11.625 7.58594C12.1607 7.58594 12.6071 7.72853 12.9643 8.01371C13.3214 8.29888 13.5 8.68776 13.5 9.18034C13.5 9.29701 13.4931 9.38774 13.4794 9.45256L12.5522 15.4651C12.5247 15.7632 12.4217 15.99 12.2431 16.1456C12.0783 16.3012 11.8723 16.3789 11.625 16.3789ZM11.625 20.7344C11.1168 20.7344 10.6978 20.5788 10.3681 20.2677C10.0385 19.9437 9.87363 19.5418 9.87363 19.0622C9.87363 18.5826 10.0385 18.1872 10.3681 17.8761C10.6978 17.552 11.1168 17.39 11.625 17.39C12.1332 17.39 12.5522 17.552 12.8819 17.8761C13.2115 18.1872 13.3764 18.5826 13.3764 19.0622C13.3764 19.5418 13.2115 19.9437 12.8819 20.2677C12.5522 20.5788 12.1332 20.7344 11.625 20.7344Z"
          fill="#3C3C3C"
        />
      </svg>
      <p>Step 2. Select two side dishes</p>
      <svg
        id="arrow-dp-box-02"
        width="14"
        height="24"
        viewBox="0 0 14 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="arrow-dp-box"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M0.585787 20.5858C-0.195262 21.3668 -0.195262 22.6332 0.585787 23.4142C1.36684 24.1953 2.63316 24.1953 3.41421 23.4142L13.4142 13.4142C14.1953 12.6332 14.1953 11.3668 13.4142 10.5858L3.41421 0.585786C2.63316 -0.195262 1.36684 -0.195262 0.585787 0.585786C-0.195262 1.36684 -0.195262 2.63317 0.585787 3.41421L9.17157 12L0.585787 20.5858Z"
          fill="#293F94"
        />
      </svg>
    </div>

    <div v-show="selectSideDishes" class="meal-showdown">
      <!-- side dishes foreach -->
      <div class="meal-info-sort">
        <p class="left-info">Entry meal</p>
        <div class="right-sort">
          <p class="light-text t-i">sort by</p>
          <span class="sort-by">
            <span @click="toggleSort('sides')">
              <p class="t-i sort-by-text">{{ sortSidesBy }}</p>
              <svg
                width="12"
                height="8"
                viewBox="0 0 12 8"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10.2929 1.11125C10.6834 0.720728 11.3166 0.720728 11.7071 1.11125C12.0976 1.50178 12.0976 2.13494 11.7071 2.52547L6.70711 7.52547C6.31658 7.91599 5.68342 7.91599 5.29289 7.52547L0.292893 2.52547C-0.0976311 2.13494 -0.0976311 1.50178 0.292893 1.11125C0.683418 0.720728 1.31658 0.720728 1.70711 1.11125L6 5.40415L10.2929 1.11125Z"
                  fill="#1A1A1A"
                />
              </svg>
            </span>
            <div
              :class="{
                'sort-dropdown': true,
                'sort-dropdown-opened': sortSideDishesMenuOpened,
              }"
            >
              <div
                v-for="option in sortByOptions"
                :key="option"
                class="sort-dropdown-value"
                @click="selectSortBy('sides', option)"
              >
                {{ option }}
                <svg v-if="option === sortSidesBy" width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.89847 12.3019L0.498517 8.90218C-0.166172 8.23753 -0.166172 7.1632 0.498517 6.49855C1.16321 5.8339 2.23759 5.8339 2.90228 6.49855L4.83685 8.43301L12.8859 0.757419C13.4061 -0.024525 14.46 -0.23531 15.2437 0.286553C16.024 0.808415 16.2348 1.86234 15.7146 2.64428L6.51473 12.0436C6.23253 12.4668 5.77354 12.7422 5.26864 12.7915C5.21085 12.7966 5.15645 12.8 5.10035 12.8C4.65155 12.8 4.21806 12.6232 3.89847 12.3019Z" fill="#3C3C3C"/>
                </svg>
              </div>
            </div>
          </span>
          <div class="block-30px"></div>
          <span class="filter">
            <p class="t-i" @click="openFilters('sides')">Filters</p>
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M5.18812 8.29981L0.676239 1.98229C0.233121 1.36184 0.676577 0.5 1.43895 0.5H14.5611C15.3234 0.5 15.7669 1.36184 15.3238 1.98229L10.8119 8.29981V12.6865C10.8119 13.0416 10.6113 13.3662 10.2938 13.525L6.54458 15.3998C5.92138 15.7115 5.18812 15.2582 5.18812 14.5614V8.29981Z"
                fill="#1A1A1A"
              />
            </svg>
          </span>
        </div>
      </div>
      <span>
        <div v-for="dish in sideDishProducts" :key="dish.id">
          <div class="w-meals-view-card meal-item">
            <div class="meal-item-icon-wrapper">
              <svg
                width="22"
                height="24"
                viewBox="0 0 22 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.9421 21.208C15.1731 21.208 13.7338 19.7687 13.7338 17.9993C13.7338 17.6589 13.7878 17.3315 13.8865 17.023C14.4084 17.2447 14.9634 17.4209 15.5516 17.5464C15.6164 17.5605 15.6808 17.5669 15.7441 17.5669C16.1673 17.5669 16.5476 17.2722 16.6396 16.842C16.7458 16.347 16.4303 15.8597 15.9352 15.7536C15.5955 15.6809 15.2726 15.5886 14.9641 15.4783C15.5098 15.0492 16.1956 14.7911 16.9421 14.7911C18.711 14.7911 20.1507 16.2304 20.1507 17.9993C20.1507 19.7687 18.711 21.208 16.9421 21.208ZM18.749 10.2057C18.1366 9.87274 17.4933 9.59188 16.8604 9.31586C14.6896 8.36862 12.626 7.46868 11.5942 4.64966C15.2688 5.0363 17.9522 7.1502 18.749 10.2057ZM8.0015 16.3091C8.45296 17.0373 8.59377 17.8982 8.39821 18.7326C8.20228 19.5669 7.69345 20.275 6.96486 20.7265C6.45641 21.042 5.87309 21.2085 5.27859 21.2085C4.15776 21.2085 3.13713 20.6412 2.54748 19.6902C2.09602 18.9616 1.95522 18.1012 2.15077 17.2668C2.3467 16.4324 2.85553 15.7243 3.58412 15.2725C3.87876 15.09 4.19873 14.9588 4.531 14.8795C4.5973 15.4107 4.7232 15.9687 4.92025 16.5594C5.04802 16.9438 5.40561 17.1871 5.78965 17.1871C5.88575 17.1871 5.98334 17.1718 6.07945 17.1398C6.55959 16.9796 6.81959 16.4607 6.65942 15.9802C6.54543 15.6375 6.462 15.3108 6.40463 14.9961C7.05761 15.2404 7.62007 15.6938 8.0015 16.3091ZM16.9412 12.9578C15.4889 12.9578 14.1788 13.5758 13.2577 14.5617C12.5935 14.0533 12.0474 13.4096 11.6273 12.6307C10.8167 11.1285 10.5061 9.13007 10.6823 6.94391C12.1204 9.24629 14.288 10.1943 16.1262 10.9963C17.3327 11.5226 18.4722 12.0199 19.2611 12.8088C19.4366 12.9842 19.6709 13.0774 19.9093 13.0774H19.9182C20.4222 13.0744 20.8297 12.665 20.8297 12.1603C20.8297 12.1312 20.8282 12.1026 20.8256 12.0739C20.7824 7.05492 16.996 3.32367 11.6254 2.8141C11.7241 2.49301 11.8157 2.16224 11.8969 1.81843C11.8996 1.80874 11.8988 1.79943 11.901 1.79012C11.9078 1.75734 11.9107 1.72493 11.9137 1.69252C11.9167 1.66421 11.9197 1.6359 11.9197 1.60797C11.9197 1.57705 11.9167 1.54688 11.9133 1.51633C11.9107 1.48691 11.9081 1.45785 11.9025 1.42954C11.8966 1.40049 11.888 1.37293 11.8794 1.34499C11.8709 1.31668 11.8631 1.28837 11.8519 1.26081C11.8407 1.23361 11.8269 1.20828 11.8131 1.18221C11.7994 1.15651 11.7867 1.13081 11.7707 1.10659C11.7543 1.08164 11.7353 1.05854 11.7167 1.03545C11.6984 1.01273 11.6809 0.990004 11.6608 0.969144C11.6403 0.948285 11.6176 0.92966 11.5949 0.910291C11.5718 0.890548 11.5487 0.871179 11.5237 0.853672C11.5002 0.837655 11.4749 0.824245 11.45 0.81009C11.4216 0.794446 11.3933 0.778801 11.3632 0.765764C11.3539 0.762039 11.3464 0.756451 11.3371 0.752726C11.317 0.744904 11.2961 0.741924 11.2756 0.735592C11.2555 0.72926 11.2373 0.72032 11.2164 0.715105C11.2067 0.71287 11.1974 0.713242 11.1881 0.71138C11.1553 0.704675 11.1233 0.701695 11.0905 0.698343C11.0622 0.695735 11.0339 0.692383 11.0056 0.692383C10.975 0.692383 10.9452 0.695735 10.9147 0.698715C10.8853 0.701695 10.8558 0.704303 10.8272 0.70989C10.7985 0.715477 10.7713 0.724045 10.7437 0.732612C10.715 0.741179 10.6863 0.749374 10.6588 0.760549C10.632 0.771724 10.6066 0.785506 10.5806 0.798915C10.5549 0.812698 10.5288 0.825735 10.5042 0.841752C10.4792 0.858142 10.4565 0.876766 10.4334 0.895391C10.4107 0.913643 10.388 0.93115 10.3671 0.951637C10.3459 0.972124 10.3276 0.994846 10.3083 1.0172C10.2885 1.04066 10.2692 1.06338 10.2517 1.08871C10.2356 1.11218 10.2222 1.13714 10.2081 1.16247C10.1924 1.19078 10.1768 1.21909 10.1637 1.24926C10.16 1.25857 10.1541 1.26602 10.1507 1.27533C9.85458 2.03745 9.61097 2.79994 9.41131 3.55685C8.74939 5.15186 7.8759 6.46377 7.02177 7.74291C5.89946 9.42434 4.81848 11.0462 4.54209 13.0111C3.86304 13.1109 3.20783 13.3485 2.61743 13.7143C1.47276 14.4239 0.673021 15.5369 0.365715 16.8477C0.0580365 18.1589 0.279297 19.5114 0.988894 20.6561C1.91491 22.1502 3.51849 23.0419 5.27814 23.0419C6.21421 23.0419 7.13166 22.78 7.93065 22.2846C9.07532 21.5754 9.87506 20.4624 10.1827 19.1512C10.4904 17.84 10.2688 16.4875 9.55919 15.3432C8.83395 14.1729 7.69226 13.3746 6.38667 13.0826C6.64258 11.6138 7.50378 10.3235 8.54676 8.76093C8.62945 8.63652 8.71326 8.51136 8.79744 8.38471C8.83432 10.3038 9.23624 12.0601 10.0136 13.5013C10.5821 14.5547 11.3423 15.43 12.2683 16.1094C12.031 16.6935 11.8996 17.3312 11.8996 17.9995C11.8996 20.7798 14.161 23.0415 16.9412 23.0415C19.7215 23.0415 21.9833 20.7798 21.9833 17.9995C21.9833 15.2196 19.7215 12.9578 16.9412 12.9578Z"
                  fill="#293F94"
                />
              </svg>
            </div>
            <div class="meal-info-wrapper">
              <p class="meal-item-name">{{ dish.name }}</p>
              <div class="meal-values">
                <div class="value-pair">
                  <svg
                    width="12"
                    height="14"
                    viewBox="0 0 12 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.38761 13.0226C9.00438 13.3174 8.50324 13.5975 7.92841 13.8038C7.81049 13.848 7.69258 13.7301 7.72206 13.6122C7.81049 13.2437 7.86945 12.8605 7.86945 12.4625C7.86945 10.4137 6.42499 8.6745 5.92385 8.11441C5.82068 8.01123 5.65854 8.01123 5.57011 8.11441C5.06897 8.65976 3.62451 10.399 3.62451 12.4625C3.62451 12.9194 3.69821 13.3764 3.81612 13.7891C3.8456 13.907 3.74243 14.0249 3.62451 13.9954C2.63697 13.7301 1.84105 13.3027 1.54626 13.0668C-0.856261 11.0328 -0.0161164 7.83436 1.10408 6.15407C2.34218 4.25269 3.81612 2.63136 3.74242 0.361494C3.72769 0.0961853 4.02247 -0.0806873 4.2583 0.0372278C6.1302 0.980548 7.41253 3.02932 7.75154 4.66539C8.25267 4.19373 8.45903 3.45676 8.47377 2.80823C8.47377 2.4987 8.87173 2.33657 9.09282 2.5724C10.7731 4.38534 13.3672 9.91261 9.38761 13.0226Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.calories }}g Calories</p>
                </div>
                <div class="value-spacer"></div>
                <div class="value-pair">
                  <svg
                    width="11"
                    height="14"
                    viewBox="0 0 11 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0 8.66807C0 5.83383 3.33024 2.16702 5.34964 0C5.57131 0.264132 5.81789 0.550545 6.08002 0.855016C7.96848 3.04852 10.6639 6.17928 10.6639 8.66807C10.6639 10.3332 9.3294 14 5.33193 14C1.33446 14 0 10.3332 0 8.66807ZM1.59364 8.60186C1.542 8.49639 1.49094 8.39208 1.43989 8.2892C0.214175 9.74708 2.65839 13.9336 6.11922 13.2047C3.26094 12.0077 2.36399 10.1755 1.59364 8.60186Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.fat }}g Fat</p>
                </div>
                <div class="value-spacer"></div>
                <div class="value-pair">
                  <svg
                    width="12"
                    height="16"
                    viewBox="0 0 12 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.carbs }}g Carbs</p>
                </div>
                <div class="value-spacer"></div>
                <div class="value-pair">
                  <svg
                    width="12"
                    height="16"
                    viewBox="0 0 12 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.protein }}g Protein</p>
                </div>
              </div>
            </div>
            <div class="buttons-wrapper">
              <button
                class="meal-info b-t ms-outlined-button"
                @click="openDishInfo(dish.id)"
              >
                INFO
              </button>
              <!-- include the stepper component -->
              <stepper
                :dish="dish"
                :meal-index="selectedMeal"
                :selected="0"
                :stepper-index="selectedMeal - 1"
              />
            </div>
          </div>
          <!-- end of product div -->
        </div>
      </span>
      <span v-if="false">
        <div
          v-for="dish in this.$store.state.cart.selectedDishes[this.selectedMeal - 1]"
          :key="dish.id"
        >
          <div
            v-if="typeof dish.id !== 'undefined'"
            class="w-meals-view-card meal-item"
          >
            <div class="meal-item-icon-wrapper">
              <svg
                width="22"
                height="24"
                viewBox="0 0 22 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16.9421 21.208C15.1731 21.208 13.7338 19.7687 13.7338 17.9993C13.7338 17.6589 13.7878 17.3315 13.8865 17.023C14.4084 17.2447 14.9634 17.4209 15.5516 17.5464C15.6164 17.5605 15.6808 17.5669 15.7441 17.5669C16.1673 17.5669 16.5476 17.2722 16.6396 16.842C16.7458 16.347 16.4303 15.8597 15.9352 15.7536C15.5955 15.6809 15.2726 15.5886 14.9641 15.4783C15.5098 15.0492 16.1956 14.7911 16.9421 14.7911C18.711 14.7911 20.1507 16.2304 20.1507 17.9993C20.1507 19.7687 18.711 21.208 16.9421 21.208ZM18.749 10.2057C18.1366 9.87274 17.4933 9.59188 16.8604 9.31586C14.6896 8.36862 12.626 7.46868 11.5942 4.64966C15.2688 5.0363 17.9522 7.1502 18.749 10.2057ZM8.0015 16.3091C8.45296 17.0373 8.59377 17.8982 8.39821 18.7326C8.20228 19.5669 7.69345 20.275 6.96486 20.7265C6.45641 21.042 5.87309 21.2085 5.27859 21.2085C4.15776 21.2085 3.13713 20.6412 2.54748 19.6902C2.09602 18.9616 1.95522 18.1012 2.15077 17.2668C2.3467 16.4324 2.85553 15.7243 3.58412 15.2725C3.87876 15.09 4.19873 14.9588 4.531 14.8795C4.5973 15.4107 4.7232 15.9687 4.92025 16.5594C5.04802 16.9438 5.40561 17.1871 5.78965 17.1871C5.88575 17.1871 5.98334 17.1718 6.07945 17.1398C6.55959 16.9796 6.81959 16.4607 6.65942 15.9802C6.54543 15.6375 6.462 15.3108 6.40463 14.9961C7.05761 15.2404 7.62007 15.6938 8.0015 16.3091ZM16.9412 12.9578C15.4889 12.9578 14.1788 13.5758 13.2577 14.5617C12.5935 14.0533 12.0474 13.4096 11.6273 12.6307C10.8167 11.1285 10.5061 9.13007 10.6823 6.94391C12.1204 9.24629 14.288 10.1943 16.1262 10.9963C17.3327 11.5226 18.4722 12.0199 19.2611 12.8088C19.4366 12.9842 19.6709 13.0774 19.9093 13.0774H19.9182C20.4222 13.0744 20.8297 12.665 20.8297 12.1603C20.8297 12.1312 20.8282 12.1026 20.8256 12.0739C20.7824 7.05492 16.996 3.32367 11.6254 2.8141C11.7241 2.49301 11.8157 2.16224 11.8969 1.81843C11.8996 1.80874 11.8988 1.79943 11.901 1.79012C11.9078 1.75734 11.9107 1.72493 11.9137 1.69252C11.9167 1.66421 11.9197 1.6359 11.9197 1.60797C11.9197 1.57705 11.9167 1.54688 11.9133 1.51633C11.9107 1.48691 11.9081 1.45785 11.9025 1.42954C11.8966 1.40049 11.888 1.37293 11.8794 1.34499C11.8709 1.31668 11.8631 1.28837 11.8519 1.26081C11.8407 1.23361 11.8269 1.20828 11.8131 1.18221C11.7994 1.15651 11.7867 1.13081 11.7707 1.10659C11.7543 1.08164 11.7353 1.05854 11.7167 1.03545C11.6984 1.01273 11.6809 0.990004 11.6608 0.969144C11.6403 0.948285 11.6176 0.92966 11.5949 0.910291C11.5718 0.890548 11.5487 0.871179 11.5237 0.853672C11.5002 0.837655 11.4749 0.824245 11.45 0.81009C11.4216 0.794446 11.3933 0.778801 11.3632 0.765764C11.3539 0.762039 11.3464 0.756451 11.3371 0.752726C11.317 0.744904 11.2961 0.741924 11.2756 0.735592C11.2555 0.72926 11.2373 0.72032 11.2164 0.715105C11.2067 0.71287 11.1974 0.713242 11.1881 0.71138C11.1553 0.704675 11.1233 0.701695 11.0905 0.698343C11.0622 0.695735 11.0339 0.692383 11.0056 0.692383C10.975 0.692383 10.9452 0.695735 10.9147 0.698715C10.8853 0.701695 10.8558 0.704303 10.8272 0.70989C10.7985 0.715477 10.7713 0.724045 10.7437 0.732612C10.715 0.741179 10.6863 0.749374 10.6588 0.760549C10.632 0.771724 10.6066 0.785506 10.5806 0.798915C10.5549 0.812698 10.5288 0.825735 10.5042 0.841752C10.4792 0.858142 10.4565 0.876766 10.4334 0.895391C10.4107 0.913643 10.388 0.93115 10.3671 0.951637C10.3459 0.972124 10.3276 0.994846 10.3083 1.0172C10.2885 1.04066 10.2692 1.06338 10.2517 1.08871C10.2356 1.11218 10.2222 1.13714 10.2081 1.16247C10.1924 1.19078 10.1768 1.21909 10.1637 1.24926C10.16 1.25857 10.1541 1.26602 10.1507 1.27533C9.85458 2.03745 9.61097 2.79994 9.41131 3.55685C8.74939 5.15186 7.8759 6.46377 7.02177 7.74291C5.89946 9.42434 4.81848 11.0462 4.54209 13.0111C3.86304 13.1109 3.20783 13.3485 2.61743 13.7143C1.47276 14.4239 0.673021 15.5369 0.365715 16.8477C0.0580365 18.1589 0.279297 19.5114 0.988894 20.6561C1.91491 22.1502 3.51849 23.0419 5.27814 23.0419C6.21421 23.0419 7.13166 22.78 7.93065 22.2846C9.07532 21.5754 9.87506 20.4624 10.1827 19.1512C10.4904 17.84 10.2688 16.4875 9.55919 15.3432C8.83395 14.1729 7.69226 13.3746 6.38667 13.0826C6.64258 11.6138 7.50378 10.3235 8.54676 8.76093C8.62945 8.63652 8.71326 8.51136 8.79744 8.38471C8.83432 10.3038 9.23624 12.0601 10.0136 13.5013C10.5821 14.5547 11.3423 15.43 12.2683 16.1094C12.031 16.6935 11.8996 17.3312 11.8996 17.9995C11.8996 20.7798 14.161 23.0415 16.9412 23.0415C19.7215 23.0415 21.9833 20.7798 21.9833 17.9995C21.9833 15.2196 19.7215 12.9578 16.9412 12.9578Z"
                  fill="#293F94"
                />
              </svg>
            </div>
            <div class="meal-info-wrapper">
              <p class="meal-item-name">{{ dish.name }}</p>
              <div class="meal-values">
                <div class="value-pair">
                  <svg
                    width="12"
                    height="14"
                    viewBox="0 0 12 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.38761 13.0226C9.00438 13.3174 8.50324 13.5975 7.92841 13.8038C7.81049 13.848 7.69258 13.7301 7.72206 13.6122C7.81049 13.2437 7.86945 12.8605 7.86945 12.4625C7.86945 10.4137 6.42499 8.6745 5.92385 8.11441C5.82068 8.01123 5.65854 8.01123 5.57011 8.11441C5.06897 8.65976 3.62451 10.399 3.62451 12.4625C3.62451 12.9194 3.69821 13.3764 3.81612 13.7891C3.8456 13.907 3.74243 14.0249 3.62451 13.9954C2.63697 13.7301 1.84105 13.3027 1.54626 13.0668C-0.856261 11.0328 -0.0161164 7.83436 1.10408 6.15407C2.34218 4.25269 3.81612 2.63136 3.74242 0.361494C3.72769 0.0961853 4.02247 -0.0806873 4.2583 0.0372278C6.1302 0.980548 7.41253 3.02932 7.75154 4.66539C8.25267 4.19373 8.45903 3.45676 8.47377 2.80823C8.47377 2.4987 8.87173 2.33657 9.09282 2.5724C10.7731 4.38534 13.3672 9.91261 9.38761 13.0226Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.calories }}g Calories</p>
                </div>
                <div class="value-spacer"></div>
                <div class="value-pair">
                  <svg
                    width="11"
                    height="14"
                    viewBox="0 0 11 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0 8.66807C0 5.83383 3.33024 2.16702 5.34964 0C5.57131 0.264132 5.81789 0.550545 6.08002 0.855016C7.96848 3.04852 10.6639 6.17928 10.6639 8.66807C10.6639 10.3332 9.3294 14 5.33193 14C1.33446 14 0 10.3332 0 8.66807ZM1.59364 8.60186C1.542 8.49639 1.49094 8.39208 1.43989 8.2892C0.214175 9.74708 2.65839 13.9336 6.11922 13.2047C3.26094 12.0077 2.36399 10.1755 1.59364 8.60186Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.fat }}g Fat</p>
                </div>
                <div class="value-spacer"></div>
                <div class="value-pair">
                  <svg
                    width="12"
                    height="16"
                    viewBox="0 0 12 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.carbs }}g Carbs</p>
                </div>
                <div class="value-spacer"></div>
                <div class="value-pair">
                  <svg
                    width="12"
                    height="16"
                    viewBox="0 0 12 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M5.98674 7.1517C6.51939 6.52504 7.49071 5.20907 7.49071 3.67376C7.49071 2.13846 6.51939 0.791152 5.98674 0.164497C5.79874 -0.0548323 5.48541 -0.0548323 5.29742 0.164497C4.76476 0.791152 3.79344 2.10713 3.79344 3.64243C3.79344 5.17773 4.76476 6.52504 5.29742 7.12036C5.48541 7.33969 5.79874 7.33969 5.98674 7.1517ZM4.80842 10.7982C5.09702 10.8109 5.31667 10.6131 5.29855 10.33C5.28052 9.50593 5.05931 7.8905 3.99766 6.74142C2.94145 5.6232 1.33154 5.33438 0.491175 5.25984C0.202582 5.2471 -0.0170669 5.44491 0.00104422 5.72806C0.01908 6.5521 0.240292 8.16753 1.30194 9.31661C2.36359 10.4657 3.99892 10.7182 4.80842 10.7982ZM5.95426 10.3613C6.00316 9.5427 6.19895 7.89097 7.25516 6.77275C8.31681 5.62367 9.95758 5.3403 10.7616 5.29118C11.0194 5.27299 11.2699 5.47624 11.2518 5.75939C11.2029 6.57799 11.0071 8.22972 9.95088 9.34794C8.89467 10.4662 7.2539 10.7495 6.4444 10.8295C6.18666 10.8477 5.93615 10.6445 5.95426 10.3613ZM4.80842 15.9994C5.09702 16.0122 5.31667 15.8144 5.29855 15.5312C5.28052 14.7072 5.05931 13.0917 3.99766 11.9427C2.94145 10.8244 1.33154 10.5356 0.491175 10.4611C0.202582 10.4483 -0.0170669 10.6461 0.00104422 10.9293C0.01908 11.7533 0.240292 13.3688 1.30194 14.5178C2.36359 15.6669 3.99892 15.9194 4.80842 15.9994ZM7.2553 11.9113C8.3115 10.7931 9.95228 10.5097 10.7618 10.4298C11.0504 10.417 11.2646 10.6457 11.2519 10.898C11.203 11.7166 11.0072 13.3683 9.95101 14.4865C8.89481 15.6047 7.25404 15.8881 6.44453 15.9681C6.1868 15.9863 5.93629 15.783 5.9544 15.4999C6.00329 14.6813 6.19909 13.0296 7.2553 11.9113Z"
                      fill="#A4B6C0"
                    />
                  </svg>
                  <p>{{ dish.protein }}g Protein</p>
                </div>
              </div>
            </div>
            <div class="buttons-wrapper">
              <button
                class="meal-info b-t ms-outlined-button"
                @click="openDishInfo(dish.id)"
              >
                INFO
              </button>
              <!-- include the stepper component -->
              <stepper
                :dish="dish"
                :meal-index="selectedMeal"
                :selected="0"
                :stepper-index="selectedMeal - 1"
              />
            </div>
          </div>
          <!-- end of product div -->
        </div>

      </span>
      <!-- end of product div -->
    </div>

    <div v-show="mobileConfirmButton" class="finalize-order">
      <button @click="mobileConfirmClick()">confirm</button>
    </div>
    <select-meal-popup
      v-if="addMealPopup"
      @close-popup="addMealPopup = false"
    />
    <meal-info
      v-if="mealInfoPopup"
      :meal-id="mealInfoId"
      @close-popup="mealInfoPopup = false"
    />
  </div>
</template>

<script>
import selectMealPopup from './../../popups/selectMealPopup.vue'
import mealInfo from './../../popups/mealInfo.vue'
import {
  checkIfMealIsSelected,
  getProductByIndex,
  getFreeIndexes,
  getAllMealsByIndex,
  checkIfSideDishIsSelected,
  checkIfMealIsDone,
  checkIfContains,
  sortArray,
} from './../../mealFunctions.js'
import { saveCartContent } from './../../apiFunctions.js'
import stepper from './../stepper.vue'

export default {
  components: {
    selectMealPopup,
    mealInfo,
    stepper,
  },
  data() {
    return {
      addMealPopup: false,
      // NAV BAR MEAL SELECTION
      selectedMeal: 1,
      selectedMealSet: false,
      sortBy: 'Less calories',
      sortSidesBy: 'Less calories',
      sortByOptions: ['Less calories', 'More calories', 'Lower price', 'Higher price'],
      selectEntryMeal: false,
      mealInfoPopup: false,
      mealInfoId: 1,
      actualMealId: false,
      selectSideDishes: false,
      // side dish index
      sideDishIndex: 0,
      selectedSideDishes: [],
      storeReference: null,
      // popups
      deleteMealPopup: false,
      sideDishCheck: false,
      // mobile
      mobileConfirmButton: false,
      scrollToLeft: false,
      scrollToRight: false,
      mealProducts: this.$store.state.wizard.products,
      sideDishProducts: this.$store.state.wizard.sideDishes,
      // dropdown menu
      sortMealsMenuOpened: false,
      sortSideDishesMenuOpened: false
    }
  },
  computed: {
    sideDishes() {
      // console.log(getAllMealsByIndex(this.$store, this.selectedMeal - 1))
      this.selectedSideDishes = getAllMealsByIndex(
        this.$store,
        this.selectedMeal
      )
    },
  },
  created() {
    const self = this
    this.$nuxt.$on('next-meal', () => {
      if (self.selectedMeal < self.$store.state.wizard.amountOfMeals) {
        // go to the next meal
        self.setSelectedMeal(self.selectedMeal + 1)
        self.selectMealDetail(self.selectedMeal)
      }
    })

    // event for checking the meals from popups like duplicate meal popup
    this.$nuxt.$on('check-side-dishes', () => {
      self.selectMealDetail(self.selectedMeal)
    })

    // check cart availability while selecting side dishes
    this.$nuxt.$on('recheck-cart-availability', () => {
      self.checkCartAvailability()
    })

    // recheck the scrolls on the event
    this.$nuxt.$on('recheck-scrollable-navbar', () => {
      let interval = setInterval(() => {
        self.checkScrollableNavbar()
        clearInterval(interval)
      }, 100)
      self.checkScrollableNavbar()
    })

    // assign select event
    this.$nuxt.$on('select-main-meal', (meal) => {
      self.selectMeal(self.selectedMeal, meal)
    })

    // change the confirm button
    this.$nuxt.$on('confirmation-button-toggle', (boolValue) => {
      this.mobileConfirmButton = boolValue
    })

    this.$nuxt.$on('meals-end-set', () => {
      self.setSelectedMeal(self.store.state.wizard.amountOfMeals)
      self.selectMealDetail(self.store.state.wizard.amountOfMeals)
    })

    // event that checks the mobile confirmation button
    this.$nuxt.$on('mobile-confirmation-check', () => {
      if (
        self.selectedMealSet &&
        self.$store.state.wizard.sideDishFreeSlots === 0
      ) {
        // check the count of side dishes
        self.mobileConfirmButton = true
      } else {
        self.mobileConfirmButton = false
      }
    })

    // called from filter popup on confirmation
    this.$nuxt.$on('refresh-meals-filtered', () => {
      self.filterMeals()
    })
    this.$nuxt.$on('refresh-sidedishes-filtered', () => {
      self.filterSideDishes()
    })
  },
  mounted() {
    let self = this

    if (this.$store.state.cart.selectedMeals.length == 0) {
      // generate the meals, default number of 5
      this.$store.commit('cart/generateMealItems', 5)
      this.$store.commit('cart/generateSideDishes', 5)
      this.$store.commit('wizard/refreshPrice', this.$store)
    }

    // setup the navbar event listeners
    let navBar = document
      .getElementById('navbar-meal')

    navBar.addEventListener('scroll', (event) => {
        this.checkScrollableNavbar()
      }, { passive: true })

    // interval for loading products because of async method
    let x = setInterval(() => {
        self.mealProducts = self.$store.state.wizard.products
        if (self.mealProducts.length != 0) {
            clearInterval(x)
        }
    }, 50)

    let y = setInterval(() => {
      self.sideDishProducts = self.$store.state.wizard.sideDishes
      if (self.sideDishProducts.length != 0) {
        clearInterval(y)
      }
    }, 50)

    this.selectMealDetail(1)
    this.setSelectedMeal(1)
    this.selectedSideDishes = this.$store.state.cart.selectedDishes
    this.storeReference = this.$store
    this.checkSideDish()
    this.openSelectEntryMeal()
    this.checkScrollableNavbar()
  },
  methods: {
    checkIfMealWasDuplicated(n) {
      return this.$store.state.wizard.duplicatedMeals.includes(n)
    },
    saveCartContent() {
      saveCartContent(this.$axios, this.$store)
    },
    checkIfSideDishesAreSelected() {
      if (checkIfSideDishIsSelected(this.$store, this.selectedMeal - 1, 0)) {
        if (checkIfSideDishIsSelected(this.$store, this.selectedMeal - 1, 1))
          this.sideDishCheck = true
      } else this.sideDishCheck = false
    },
    toggleSort(type) {
      if (type === 'meals') {
        if (this.sortMealsMenuOpened)
          this.sortMealsMenuOpened = false
        else
          this.sortMealsMenuOpened = true
      } else if (type === 'sides') {
        if (this.sortSideDishesMenuOpened)
          this.sortSideDishesMenuOpened = false
        else
          this.sortSideDishesMenuOpened = true
      }
    },
    selectSortBy(type, value) {
      this.toggleSort(type)
      if (type === 'meals') {
        this.sortBy = value
        this.filterMeals()
      }
      if (type === 'sides') {
        this.sortSidesBy = value
        this.filterSideDishes()
      }
    },
    checkScrollableNavbar() {
      // navbar content
      const navBarContent = document.getElementById(
        'meal-items-wrapper-content'
      )
      const navBar = document.getElementById('navbar-meal')

      // general condition
      if (navBarContent.clientWidth > navBar.clientWidth) {
        if (navBar.scrollLeft > 48)
          this.scrollToLeft = true
        else
          this.scrollToLeft = false

        if (navBar.scrollLeft < (navBarContent.clientWidth - navBar.clientWidth) - 48)
          this.scrollToRight = true
        else
          this.scrollToRight = false
      }
    },
    setCartAvailability(boolVal) {
      if (boolVal) {
        // emit event
        $nuxt.$emit('last-meal-selection-enter')
        // set the button to go to cart
        $nuxt.$emit('change-button-title', 'Check out')
      } else {
        $nuxt.$emit('last-meal-selection-exit')
        $nuxt.$emit('change-button-title', 'Next meal')
      }
    },
    checkCartAvailability() {
      if (
        checkIfMealIsDone(this.$store, this.$store.state.wizard.amountOfMeals) && this.selectedMeal === this.$store.state.wizard.amountOfMeals
      ) {
        this.setCartAvailability(true)
      } else {
        this.setCartAvailability(false)
      }
    },
    selectMealDetail(nbr) {
      this.hideSelectEntryMeal()
      this.hideSelectSideDishes()
      this.$store.commit('wizard/setActualSelectedMealIndex', nbr)

      document
        .getElementById('arrow-dp-box-01')
        .classList.remove('arrow-dp-box-01-active')

      // get all nav items
      const navItems = document.getElementsByClassName('n-i-w')
      for (let i = 0; i < navItems.length; i++) {
        navItems[i].classList.remove('nav-item-active')
      }
      document.getElementById('n-i-' + nbr).classList.add('nav-item-active')
      // toggle the meal selection - TODO
      this.selectedMealSet = checkIfMealIsSelected(
        this.$store,
        this.selectedMeal
      )

      // emit event of selected meal
      $nuxt.$emit('entry-meal-selected', this.selectedMealSet)
      this.checkSideDish()

      // set the order panel entry meal selection
      if (this.selectedMealSet) {
        this.$store.commit(
          'wizard/setActualSelectedMeal',
          getProductByIndex(this.$store, nbr)
        )
        this.actualMealId = getProductByIndex(this.$store, nbr).id
      } else {
        this.$store.commit('wizard/setActualSelectedMeal', false)
        this.openSelectEntryMealWhenChangedMealDetail()
      }

      // set the free dishes index
      this.$store.commit(
        'wizard/setFreeSlots',
        getFreeIndexes(this.$store, nbr - 1)
      )

      // send event for order panel
      $nuxt.$emit('meal-updated', nbr - 1)
      $nuxt.$emit('mobile-confirmation-check')
      this.openSelectEntryMeal()
      this.checkCartAvailability()
      this.saveCartContent()
    },
    // this function sets the NAV BAR meal selection
    setSelectedMeal(nbr) {
      this.selectedMeal = nbr
      $nuxt.$emit('meal-view-changed')
    },
    toggleSelectEntryMeal() {
      if (this.selectEntryMeal) {
        this.selectEntryMeal = false
        document
          .getElementById('arrow-dp-box-01')
          .classList.remove('arrow-dp-box-01-active')
      } else {
        this.selectEntryMeal = true
        document
          .getElementById('arrow-dp-box-01')
          .classList.add('arrow-dp-box-01-active')
      }
    },
    toggleSelectSideDishes() {
      if (
        !document
          .getElementById('side-dish-card')
          .classList.contains('w-meals-view-card-disabled')
      ) {
        if (this.selectSideDishes) {
          this.selectSideDishes = false
          document
            .getElementById('arrow-dp-box-02')
            .classList.remove('arrow-dp-box-01-active')
        } else {
          this.selectSideDishes = true
          document
            .getElementById('arrow-dp-box-02')
            .classList.add('arrow-dp-box-01-active')
        }
      }
    },
    openSelectEntryMealWhenChangedMealDetail() {
      if (this.selectEntryMeal) {
      }
    },
    hideSelectEntryMeal() {
      this.selectEntryMeal = false
      document
        .getElementById('arrow-dp-box-01')
        .classList.remove('arrow-dp-box-01-active')
    },
    hideSelectSideDishes() {
      this.selectSideDishes = false
      document
        .getElementById('arrow-dp-box-02')
        .classList.remove('arrow-dp-box-01-active')
    },
    openSelectEntryMeal() {
      this.selectEntryMeal = true
      // todo
      document
        .getElementById('arrow-dp-box-01')
        .classList.add('arrow-dp-box-01-active')
    },
    openMealInfo(val) {
      this.mealInfoId = val
      this.mealInfoPopup = true
    },
    openDishInfo(val) {
      $nuxt.$emit('dish-info-open', val)
    },
    // method that selects the meal
    selectMeal(mealNbr, mealProduct) {
      // select the meal
      const values = Object
      values.mealNbr = mealNbr
      values.mealProduct = mealProduct
      this.selectedMealSet = true
      this.actualMealId = mealProduct.id
      this.$store.commit('cart/selectMeal', values)
      this.$store.commit('wizard/setActualSelectedMeal', mealProduct)
      // emits the event that the meal was selected
      $nuxt.$emit('entry-meal-selected', this.selectedMealSet)

      // event that checks the button
      if (window.innerWidth <= 1283) {
        // send events when mobile only
        $nuxt.$emit('mobile-confirmation-check')
      }

      // UI interaction
      this.toggleSelectEntryMeal()
      this.checkSideDish()
      this.toggleSelectSideDishes()
    },
    // todo custom login for selecting up to 2 dishes.
    selectSideDish(sideDishProduct) {
      this.$store.commit(
        'cart/selectSideDish',
        sideDishProduct,
        this.sideDishIndex
      )
      this.sideDishIndex++
    },
    unselectMeal(mealNbr) {
      // unselect the meal
      const values = Object
      values.mealProduct = null
      this.selectedMealSet = false
      this.$store.commit('cart/selectMeal', values)
      this.$store.commit('wizard/setActualSelectedMeal', null)
      this.checkSideDish()
      this.hideSelectSideDishes()
    },
    // helper function, so we can access it in the template
    checkIfMealIsSelected(index) {
      return checkIfMealIsSelected(this.$store, index)
    },
    getSelectedSideDishes() {
      return getAllMealsByIndex(this.$store, this.selectedMeal)
    },
    openFilters(type) {
      $nuxt.$emit('toogle-filter-popup', true, type)
    },
    mobileConfirmClick() {
      // show it
      if (this.selectedMeal === this.$store.state.wizard.amountOfMeals) {
        $nuxt.$emit('order-panel-mobile', true)
        $nuxt.$emit('nav-bar-toggle', false)
        this.mobileConfirmButton = false
      } else {
        $nuxt.$emit('next-meal')
      }
    },
    checkSideDish() {
      if (this.selectedMealSet) {
        document
          .getElementById('side-dish-card')
          .classList.remove('w-meals-view-card-disabled')
      } else {
        document
          .getElementById('side-dish-card')
          .classList.add('w-meals-view-card-disabled')
      }

    },
    checkIfMealIsDone(n) {
      const isMealDone = checkIfMealIsDone(this.$store, n)
      // set the next meal to be active or not
      const Nbr = document.getElementById('n-i-' + (n + 1))
      const nextMealNbr = document.getElementById('n-i-' + (n + 1))

      if (nextMealNbr != null) {
        if (isMealDone) nextMealNbr.classList.add('nav-item-available')
        else nextMealNbr.classList.remove('nav-item-available')
      }

      return isMealDone
    },
    selectMealFromNavbar(n) {
      let check = checkIfMealIsDone(this.$store, n - 1)
      if ((n - 1) === 0) {
        check = checkIfMealIsDone(this.$store, n)
      }
      if (check) {
        // also, check the side dishes
        this.setSelectedMeal(n)
        this.selectMealDetail(n)
      }
    },
    scrollNavbarHorizontally(direction) {
      const elm = document.getElementById('navbar-meal')
      const scrollSpeed = 160
      if (direction === 'left') {
        elm.scroll({
          top: 0,
          left: elm.scrollLeft - scrollSpeed,
          behavior: 'smooth',
        })
      } else if (direction === 'right') {
        elm.scroll({
          top: 0,
          left: elm.scrollLeft + scrollSpeed,
          behavior: 'smooth',
        })
      }
    },
    filterMeals() {
      let filters = this.$store.state.filters.mealFilters
      let filteredMeals = this.$store.state.wizard.products.filter((elm) =>
        checkIfContains(filters, elm.contains)
      )

      // sort the array
      filteredMeals = sortArray(filteredMeals, this.sortBy)

      this.mealProducts = filteredMeals
    },
    filterSideDishes() {
      let filters = this.$store.state.filters.sideDishesFilters
      let sideDishProducts = this.$store.state.wizard.sideDishes.filter((elm) =>
        checkIfContains(filters, elm.contains)
      )
      sideDishProducts = sortArray(sideDishProducts, this.sortSidesBy).reverse()
      this.sideDishProducts = sideDishProducts
    },
  },
}
</script>

<style scoped>
.view {
  width: 100%;
  height: 100%;
  overflow-y: auto;
}

.meal-view-card-warning {
  border: 2px solid #ffce20 !important;
}

.navbar-scroll-wrapper {
  position: relative;
}

.side-meal-stepper-box {
  padding: 8px;
  background: #f6f9fc;
  border-radius: 8px;
  display: inline-block;
  vertical-align: middle;
}

.slide-left-wrapper {
  position: absolute;
  left: 0px;
  top: 0px;
  width: 56px;
  height: 100%;
  z-index: 2;
  background: linear-gradient(-90deg, rgba(246, 249, 252, 0.0001) 0%, rgba(246, 249, 252, 0.0156863) 0.52%, rgba(246, 249, 252, 0.054902) 2.03%, rgba(246, 249, 252, 0.117647) 4.41%, rgba(246, 249, 252, 0.2) 7.58%, rgba(246, 249, 252, 0.290196) 11.43%, rgba(246, 249, 252, 0.392157) 15.87%, rgba(246, 249, 252, 0.501961) 20.8%, rgba(246, 249, 252, 0.607843) 26.12%, rgba(246, 249, 252, 0.709804) 31.73%, rgba(246, 249, 252, 0.8) 37.53%, rgba(246, 249, 252, 0.882353) 43.43%, rgba(246, 249, 252, 0.945098) 49.33%, rgba(246, 249, 252, 0.984314) 55.12%, #F6F9FC 60.72%);
}

.slide-right-wrapper {
  position: absolute;
  right: 0px;
  top: 0px;
  width: 56px;
  height: 100%;
  z-index: 2;
  background: linear-gradient(90deg, rgba(246, 249, 252, 0.0001) 0%, rgba(246, 249, 252, 0.0156863) 0.52%, rgba(246, 249, 252, 0.054902) 2.03%, rgba(246, 249, 252, 0.117647) 4.41%, rgba(246, 249, 252, 0.2) 7.58%, rgba(246, 249, 252, 0.290196) 11.43%, rgba(246, 249, 252, 0.392157) 15.87%, rgba(246, 249, 252, 0.501961) 20.8%, rgba(246, 249, 252, 0.607843) 26.12%, rgba(246, 249, 252, 0.709804) 31.73%, rgba(246, 249, 252, 0.8) 37.53%, rgba(246, 249, 252, 0.882353) 43.43%, rgba(246, 249, 252, 0.945098) 49.33%, rgba(246, 249, 252, 0.984314) 55.12%, #F6F9FC 60.72%);
}

.slide-right-wrapper svg {
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%) rotate(180deg);
  cursor: pointer;
}

.slide-left-wrapper svg {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
}

.slide-left-wrapper svg:hover path {
  fill: #4264e8;
}

.slide-left-wrapper svg path {
  transition: 250ms ease;
}

.slide-right-wrapper svg path {
  transition: 250ms ease;
}

.slide-right-wrapper svg:hover path {
  fill: #4264e8;
}

.add-btn {
  background: #34bc89;
  border-radius: 8px;
  display: inline-block;
  font-weight: 800;
  font-size: 12px;
  line-height: 16px;
  text-align: center;
  letter-spacing: 1.4185px;
  text-transform: uppercase;
  color: #ffffff;
  vertical-align: top;
  padding-left: 14px;
  padding-right: 14px;
  padding-top: 8px;
  padding-bottom: 8px;
  margin-top: 16px;
  margin-left: 18px;
  margin-right: 24px;
  transition: 250ms ease;
}

.add-btn:hover {
  background: #32d998;
  border-color: #32d998;
}

.meal-nav {
  height: 65px;
  background-color: #ffffff;
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  position: relative;
}

.meal-nav::-webkit-scrollbar {
  display: none;
}

.meal-item-wrapper {
  width: max-content;
  height: 100%;
}

.nav-item {
  height: 100%;
  width: 165px;
  position: relative;
  display: inline-block;
}

.nav-item p {
  margin-bottom: 0;
  text-align: center;
  font-weight: 800;
  font-size: 18px;
  letter-spacing: 0.217059px;
  color: #a4b6c0;
  position: absolute;
  width: 100%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border-right: 2px solid rgba(41, 63, 148, 0.08);
  border-radius: 2px;
  cursor: pointer;
  transition: 200ms ease;
}

.nav-item::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 7.5px;
  background: #293f94;
  box-shadow: 4px 0px 4px rgba(43, 45, 55, 0.01);
  border-top-right-radius: 8px;
  border-top-left-radius: 8px;
  opacity: 0;
  transition: 350ms ease;
}

.nav-item p:hover {
  color: #3c3c3c;
}

.nav-item-active p {
  color: #3c3c3c !important;
}

.nav-item-available p {
  color: #3c3c3c !important;
}

.nav-item-active::after {
  opacity: 1;
}

.nav-item svg {
  position: absolute;
  top: 50%;
  left: 24px;
  transform: translateY(-50%);
}

.m-top-24 {
  margin-top: 24px;
}

.meal-item-icon-wrapper {
  background: #e0e9ef;
  border-radius: 20px;
  width: 80px;
  height: 80px;
  display: inline-block;
  vertical-align: middle;
  position: relative;
}

.meal-item-icon-wrapper svg {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

.meal-item-name {
  display: inline-block;
  margin-top: 0px;
  margin-bottom: 0px;
}

.meal-item {
  margin-top: 16px;
  position: relative;
}

.meal-item:first-child {
  margin-top: 8px;
}

.meal-info-sort {
  width: calc(100% - 48px);
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top: 16px;
}

.meal-info-sort .left-info {
  font-weight: 800;
  font-size: 18px;
  line-height: 25px;
  margin-bottom: 0px;
  letter-spacing: 0.2966px;
  color: #3c3c3c;
  width: max-content;
  display: inline-block;
}

.right-sort {
  display: inline-block;
  float: right;
  font-weight: 800;
}

.t-i {
  display: inline;
}

.block-30px {
  width: 30px;
  height: 4px;
  display: inline-block;
}

.sort-dropdown {
  position: absolute;
  left: 0px;
  background: #ffffff;
  box-shadow: 0px 4px 30px rgba(164, 182, 192, 0.32);
  border-radius: 4px;
  z-index: 20;
  padding: 20px;
  width: calc(220px - 40px);
  padding-top: 12px;
  padding-bottom: 12px;
  opacity: 0;
  pointer-events: none;
  top: 90%;
  transition: 250ms ease;
}

.sort-dropdown-opened {
  opacity: 1;
  pointer-events: all;
  top: 115%;
}

.sort-dropdown-value {
  font-family: Nunito, Arial;
  font-style: normal;
  font-weight: 800;
  font-size: 16px;
  line-height: 45px;
  color: #000000;
  transition: 250ms ease;
}

.sort-dropdown-value:hover {
  color: #575151;
}

.sort-by {
  transition: 200ms ease;
  padding: 6px;
  padding-top: 2px;
  padding-bottom: 2px;
  position: relative;
}

.sort-by:hover {
  background: #ffffff;
  border-radius: 4px;
  cursor: pointer;
}

.sort-by svg {
  transition: 200ms ease;
  margin-left: 8px;
  margin-bottom: 2px;
}

.filter {
  cursor: pointer;
  transition: 200ms ease;
}

.filter:hover {
  color: #575151;
}

.filter:hover svg path {
  fill: #575151;
}

.filter svg path {
  transition: 200ms ease;
}

.filter svg {
  margin-left: 8px;
  transform: translateY(2px);
  transition: 200ms ease;
}

.meal-info-wrapper {
  display: inline-block;
  margin-left: 16px;
  vertical-align: middle;
}

.meal-values {
  margin-top: 6px;
}

.value-pair {
  display: inline-block;
  vertical-align: middle;
}

.value-pair p {
  font-style: normal;
  font-weight: normal;
  font-size: 16px;
  line-height: 16px;
  letter-spacing: 0.192941px;
  color: #3c3c3c;
  margin-bottom: 0px;
  display: inline-block;
}

.value-pair svg {
  display: inline-block;
  transform: translateY(1px);
}

.value-spacer {
  display: inline-block;
  margin-left: 6px;
  margin-right: 6px;
  width: 2px;
  opacity: 0.1;
  background-color: #293f94;
  height: 18px;
  vertical-align: bottom;
}

.meal-info {
  display: inline-block;
}

.buttons-wrapper {
  display: inline-block;
  vertical-align: middle;
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
}

.b-t {
  color: #3c3c3c !important;
}

.select-btn {
  background: #34bc89;
  border-radius: 8px;
  color: #ffffff !important;
  transition: 250ms ease;
}

.select-btn:hover {
  background: #32d998;
  border-color: #32d998;
}

.select-meals-dishes {
  position: relative;
}

.select-meals-dishes .arrow-dp-box {
  position: absolute;
  right: 24px;
  top: 50%;
  transform: translateY(-50%);
  margin-right: 0px;
  transition: 200ms ease;
}

.select-meals-dishes svg {
  display: inline-block;
  vertical-align: middle;
  margin-right: 10px;
}

.select-meals-dishes p {
  display: inline-block;
  vertical-align: middle;
  margin-bottom: 0px;
}

.finalize-order {
  display: none;
}

.sort-by-text {
  cursor: pointer;
  transition: 200ms ease;
}

.sort-by svg path {
  transition: 200ms ease;
}

.sort-by svg:hover path {
  fill: #575151;
}

.sort-by-text:hover {
  color: #575151;
}

@media only screen and (max-width: 1282px) {
  .nav-item {
    width: 90px;
    font-size: 14px;
    line-height: 19px;
  }
  .nav-item::after {
    width: 60%;
  }
  .meal-nav {
    height: 48px;
  }
  .desktop-only-not-mobile {
    display: none;
  }
  .meal-values {
    display: none;
  }
  .buttons-wrapper {
    display: block;
    position: static;
    transform: none;
    margin-top: 4px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
  }
  .buttons-wrapper button:first-child {
    margin-right: 4px;
  }
  .meal-item-icon-wrapper {
    width: 56px;
    height: 56px;
  }
  .ms-outlined-button {
    padding-top: 5px;
    padding-bottom: 5px;
  }
  .select-btn {
    padding-top: 6px;
    padding-bottom: 6px;
  }
  .meal-info-wrapper {
    vertical-align: top;
    margin-left: 4px;
    max-width: 70%;
  }
  .select-meals-dishes p {
    font-size: 14px;
    line-height: 19px;
  }
  .select-meals-dishes .arrow-dp-box {
    height: 16px;
  }
  .w-meals-view-card {
    padding-top: 8px;
    padding-bottom: 8px;
  }
  .select-entry-meal {
    padding-top: 2px;
  }
  .finalize-order {
    display: block;
    padding-left: 16px;
    padding-right: 16px;
    padding-top: 8px;
    padding-bottom: 8px;
    position: absolute;
    top: calc(100% - 112px);
    left: 0px;
    width: 100%;
    height: 56px;
    background: #ffffff;
    box-shadow: 0px -6px 8px rgba(164, 182, 192, 0.15);
  }

  .finalize-order button {
    font-weight: 800;
    font-size: 14px;
    line-height: 19px;
    border-radius: 8px !important;
    width: 100% !important;
    height: 40px !important;
    padding-top: 8px;
    background: #34bc89;
    color: white;
  }

  .add-btn {
    margin-top: 6px;
  }
}
</style>
